<app-env-app-head-selector preTitle="Gestion des batchs" [title]="applicationSelected?.name" (applicationChanged)="applicationChanged($event)" [showEnvironment]="false" [isModarable]="true">
  <span header>
    <a id="addBatchAction" href="javascript:void(0)" style="cursor: pointer"
       *ngIf="applicationSelected"
       class="btn btn-primary mr-3" (click)="onClickAddBatch()">
      <ebad-icon name="plus"></ebad-icon>
      Nouveau batch
    </a>
  </span>
</app-env-app-head-selector>

<ebad-show-hide-column [datatableInstance]="dtElement.dtInstance" [columns]="columns"></ebad-show-hide-column>
<div class="card">
  <div class="table-responsive">
    <table aria-describedby="tableTitle" [dtOptions]="dtOptions" [dtTrigger]="dtTrigger" datatable class="table card-table table-vcenter text-nowrap datatable">
      <thead>
      <tr>
        <th id="batchId">
          ID
        </th>
        <th id="batchName">
          Nom
        </th>
        <th id="batchShell">
          Shell
        </th>
        <th id="batchEnvs">
          Environnements
        </th>
        <th id="actions">
        </th>
      </tr>
      </thead>
      <tbody>
      <tr *ngFor="let batch of batchs">
        <td class="align-middle" *ngIf="columns[0].visible">
          {{batch.id}}
        </td>
        <td class="align-middle" *ngIf="columns[1].visible">
          {{batch.name}}
        </td>
        <td class="align-middle" *ngIf="columns[2].visible">
          {{batch.path}}
        </td>
        <td class="align-middle" *ngIf="columns[3].visible">
          <span *ngFor="let env of batch.environnements" class="badge bg-green-lt mr-1" >{{env.name}}</span>
        </td>
        <td class="text-center" *ngIf="columns[4].visible">
          <a (click)="editBatch(batch)" href="javascript:void(0)" class="btn btn-secondary btn-sm">Edit</a>
          <a (click)="deleteBatch(batch)" href="javascript:void(0)" class="btn btn-secondary btn-sm">Delete</a>
        </td>
      </tr>
      </tbody>
    </table>
  </div>
</div>

